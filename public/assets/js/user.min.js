function favorite(e,t){is_login?$.ajax({url:base_url+"ajax/user_favorite",method:"POST",data:{movie_id:e},dataType:"json",success:function(a){1==a.status&&(1==t?($(".btn-favorite-"+e).hasClass("remove-favorite")?($(".btn-favorite-"+e).text("Add to favorite"),$(".btn-favorite-"+e).removeClass("remove-favorite"),$(".btn-favorite-"+e).addClass("add-favorite")):$(".btn-favorite-"+e).hasClass("add-favorite")&&($(".btn-favorite-"+e).text("Remove favorite"),$(".btn-favorite-"+e).removeClass("add-favorite"),$(".btn-favorite-"+e).addClass("remove-favorite")),"user"==window.location.pathname.split("/")[1]&&($("[data-movie-id="+e+"]").addClass("ml-item-remove"),$(".btn-favorite-"+e).remove())):($("#favorite-alert").show(),$("#favorite-message").html(a.message),setTimeout(function(){$("#favorite-alert").hide()},5e3),$(".bp-btn-like").hasClass("active")?$(".bp-btn-like").removeClass("active"):$(".bp-btn-like").addClass("active"),$(".popover-like").hide()))}}):$("#pop-login").modal("show")}function goRequestPage(e){is_login?window.location.href=e:$("#pop-login").modal("show")}function clearNotify(){var e=confirm("Are you sure delete all notify?");e&&$.ajax({url:base_url+"ajax/user_clear_notify",method:"POST",dataType:"json",success:function(e){1==e.status&&window.location.reload()}})}$(document).ready(function(){$.ajax({url:base_url+"ajax/load_login_status",type:"GET",dataType:"json",success:function(e){$("#top-user").html(e.content),1==e.is_login&&(is_login=!0)}})}),$("#request-form").submit(function(e){$("#request-submit").prop("disabled",!0),$("#request-loading").show();var t=$(this).serializeArray(),a=$(this).attr("action");$.ajax({url:a,type:"POST",data:t,dataType:"json",success:function(e){if($(".error-block").hide(),0==e.status)for(var t in e.messages)$("#error-"+t).show(),$("#error-"+t).text(e.messages[t]);1==e.status&&($("#message-success").show(),setTimeout(function(){$("#message-success").hide()},5e3),document.getElementById("request-form").reset()),$("#request-submit").removeAttr("disabled"),$("#request-loading").hide()}}),e.preventDefault()});